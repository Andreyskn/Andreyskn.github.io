(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{198:function(t,e,s){"use strict";s.r(e),s.d(e,"render",(function(){return g})),s.d(e,"handlers",(function(){return m})),s.d(e,"initState",(function(){return k}));var o=s(2),i=s(0),n=s(5),a=s(1),r=(s(306),s(307),s(6));s(308);const c=Object(r.d)("task-item",["checkbox","text","controls","priority","priority-target","text-editor","indicator","dropdown"]),l=[{icon:"double-chevron-up",text:"High",value:"high"},{icon:"equals",text:"Medium",value:"medium"},{icon:"double-chevron-down",text:"Low",value:"low"}],d=({id:t,text:e,dispatch:s,priority:a,status:r})=>{const d="done"===r,u="in-progress"===r,[p,j]=Object(i.useState)(!1),b=Object(i.useRef)(null),v=e=>()=>{s.setTaskPriority({id:t,priority:e})};Object(i.useEffect)(()=>{var t;null===(t=b.current)||void 0===t||t.select()},[p]);return Object(o.jsxs)("div",Object.assign({className:c.taskItemBlock({done:d})},{children:[Object(o.jsxs)(n.Popover,Object.assign({position:"bottom-left",minimal:!0,className:c.priorityElement({active:!d}),disabled:d},{children:[Object(o.jsx)("button",Object.assign({type:"button",className:c.priorityTargetElement()},{children:Object(o.jsx)(n.ProgressBar,{stripes:u,className:c.indicatorElement({["priority-"+a]:"medium"!==a})},void 0)}),void 0),Object(o.jsxs)(n.Menu,Object.assign({className:c.dropdownElement()},{children:[Object(o.jsx)(n.MenuItem,{text:Object(o.jsx)(n.Switch,{label:"In progress",checked:u,onChange:()=>{s.setTaskStatus({id:t,status:"in-progress"===r?"to-do":"in-progress"})}},void 0),shouldDismissPopover:!1},void 0),Object(o.jsx)(n.MenuDivider,{title:"Priority"},void 0),l.map(({icon:t,text:e,value:s})=>Object(o.jsx)(n.MenuItem,{icon:t,text:e,onClick:v(s),active:a===s},s))]}),void 0)]}),void 0),Object(o.jsx)(n.Checkbox,{id:t,checked:d,onChange:()=>{s.setTaskStatus({id:t,status:"done"===r?"to-do":"done"})},large:!0,className:c.checkboxElement()},void 0),p?Object(o.jsx)(n.TextArea,{inputRef:t=>b.current=t,value:e,onChange:e=>{s.setTaskText({id:t,text:e.target.value})},onKeyDown:t=>{var e;"Enter"!==t.key||t.shiftKey||(t.preventDefault(),null===(e=b.current)||void 0===e||e.blur())},onBlur:()=>j(!1),growVertically:!0,fill:!0,className:c.textEditorElement()},void 0):Object(o.jsx)("label",Object.assign({htmlFor:t,className:c.textElement()},{children:e}),void 0),Object(o.jsxs)(n.ButtonGroup,Object.assign({minimal:!0,className:c.controlsElement()},{children:[Object(o.jsx)(n.Button,{icon:"edit",onClick:()=>j(!0),title:"Edit"},void 0),Object(o.jsx)(n.Button,{icon:"trash",onClick:()=>s.deleteTask({id:t}),title:"Delete"},void 0)]}),void 0)]}),void 0)};!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)){var i=void 0;try{i=s[o]}catch(t){continue}t.register(i,o,"C:\\MyProjects\\Journal\\src\\plugins\\tasks\\components\\TaskItem.tsx")}}else t.register(s,"module.exports","C:\\MyProjects\\Journal\\src\\plugins\\tasks\\components\\TaskItem.tsx")}}();const u=Object(r.d)("task-list"),p=({state:t,dispatch:e})=>Object(o.jsx)("div",Object.assign({className:u.taskListBlock()},{children:t.tasks.map(t=>Object(o.jsx)(d,Object.assign({},t,{dispatch:e}),t.id))}),void 0);!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)){var i=void 0;try{i=s[o]}catch(t){continue}t.register(i,o,"C:\\MyProjects\\Journal\\src\\plugins\\tasks\\components\\TaskList.tsx")}}else t.register(s,"module.exports","C:\\MyProjects\\Journal\\src\\plugins\\tasks\\components\\TaskList.tsx")}}();const j=Object(r.d)("task-dialog",["form","input"]),b=({dispatch:t})=>{const[e,s]=Object(i.useState)(!1),r=Object(i.useRef)(null),c=Object(i.useRef)(null),l=()=>{var t;s(!1),null===(t=c.current)||void 0===t||t.reset()};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(n.Button,{text:"Add task",icon:"plus",onClick:()=>{s(!0)},elementRef:r},void 0),Object(o.jsx)(n.Dialog,Object.assign({className:j.taskDialogBlock(null,a.Classes.DARK),onClosed:()=>{var t;null===(t=r.current)||void 0===t||t.focus()},isOpen:e,onClose:l},{children:Object(o.jsx)("form",Object.assign({onSubmit:e=>{e.preventDefault();const s=e.currentTarget.elements[0];s.value&&(t.addTask({text:s.value}),l())},ref:c,className:j.formElement()},{children:Object(o.jsx)("input",{type:"text",autoFocus:!0,className:j.inputElement(null,a.Classes.INPUT,a.Classes.FILL),placeholder:"Enter task"},void 0)}),void 0)}),void 0)]},void 0)};!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)){var i=void 0;try{i=s[o]}catch(t){continue}t.register(i,o,"C:\\MyProjects\\Journal\\src\\plugins\\tasks\\components\\index.tsx")}}else t.register(s,"module.exports","C:\\MyProjects\\Journal\\src\\plugins\\tasks\\components\\index.tsx")}}();const v={addTask:(t,{text:e})=>{const s={createdAt:Date.now(),status:"to-do",id:Object(r.g)(),text:e,priority:"medium"};return Object.assign(Object.assign({},t),{tasks:[s,...t.tasks]})},deleteTask:(t,{id:e})=>Object.assign(Object.assign({},t),{tasks:t.tasks.filter(t=>t.id!==e)}),setTaskStatus:(t,{id:e,status:s})=>Object.assign(Object.assign({},t),{tasks:t.tasks.map(t=>t.id===e?Object.assign(Object.assign({},t),{status:s}):t)}),setTaskPriority:(t,{id:e,priority:s})=>Object.assign(Object.assign({},t),{tasks:t.tasks.map(t=>t.id===e?Object.assign(Object.assign({},t),{priority:s}):t)}),setTaskText:(t,{id:e,text:s})=>Object.assign(Object.assign({},t),{tasks:t.tasks.map(t=>t.id===e?Object.assign(Object.assign({},t),{text:s}):t)})};!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)){var i=void 0;try{i=s[o]}catch(t){continue}t.register(i,o,"C:\\MyProjects\\Journal\\src\\plugins\\tasks\\handlers.ts")}}else t.register(s,"module.exports","C:\\MyProjects\\Journal\\src\\plugins\\tasks\\handlers.ts")}}();const f=/- \[[x ]\] (.*)/,O={tasks:[]},x={render:(t,e)=>({main:Object(o.jsx)(p,{state:t,dispatch:e},void 0),toolbarContent:Object(o.jsx)(b,{dispatch:e},void 0)}),handlers:v,initState:t=>{if("string"==typeof t){const e=[];return t.split("\n").forEach(t=>{const s=f.exec(t);s&&e.push(s[1])}),e.reduceRight((t,e)=>v.addTask(t,{text:e}),O)}return t||O}},{render:g,handlers:m,initState:k}=x;!function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(t){var s=void 0!==e?e:exports;if(s)if("function"!=typeof s){for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)){var i=void 0;try{i=s[o]}catch(t){continue}t.register(i,o,"C:\\MyProjects\\Journal\\src\\plugins\\tasks\\init.ts")}}else t.register(s,"module.exports","C:\\MyProjects\\Journal\\src\\plugins\\tasks\\init.ts")}}()},306:function(t,e,s){},307:function(t,e,s){},308:function(t,e,s){}}]);